<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Biography (Editable)</title>
  <style>
    :root{ --accent:#0b72ff; --bg:#f6f8fb; --card:#ffffff; --muted:#6b7280 }
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin:0; background:var(--bg); color:#111}
    .container{max-width:980px; margin:36px auto; padding:20px}
    header{display:flex; align-items:center; gap:20px}
    h1{font-size:1.5rem; margin:0}
    .layout{display:grid; grid-template-columns:340px 1fr; gap:20px; margin-top:18px}
    .card{background:var(--card); border-radius:12px; padding:18px; box-shadow:0 6px 18px rgba(12,20,40,0.06)}
    .profile-pic{width:100%; border-radius:10px; height:320px; object-fit:cover; background:linear-gradient(180deg,#eef6ff,#fff)}
    label{display:block; font-size:0.9rem; margin-bottom:6px}
    .field{margin-bottom:12px}
    input[type=text], input[type=url], input[type=date], textarea, select{width:100%; padding:10px 12px; border-radius:8px; border:1px solid #e6e9ef; font-size:0.95rem}
    textarea{min-height:80px; resize:vertical}
    .small{font-size:0.85rem; color:var(--muted)}
    .row{display:flex; gap:10px}
    .btn{background:var(--accent); color:white; padding:10px 14px; border-radius:10px; border:0; cursor:pointer}
    .btn.secondary{background:transparent; color:var(--accent); border:1px solid #d6e4ff}
    .bio-title{font-weight:600; margin:0 0 6px 0}
    .bio-item{margin-bottom:8px}
    .social a{display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:8px; text-decoration:none; color:var(--accent); border:1px dashed transparent}
    .social a:hover{border-color:#e2e8ff}
    .controls{display:flex; gap:8px; margin-top:12px}
    .editable{outline:2px dashed transparent; padding:4px 2px}
    .editable:focus{outline-color:rgba(11,114,255,0.15); border-radius:6px}
    footer{margin-top:18px; text-align:center; font-size:0.85rem; color:var(--muted)}
    @media (max-width:880px){ .layout{grid-template-columns:1fr} .profile-pic{height:260px} }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <svg width="38" height="38" viewBox="0 0 24 24" fill="none" aria-hidden>
        <rect width="24" height="24" rx="6" fill="#0b72ff" />
        <path d="M12 6v6l4 2" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <div>
        <h1>My Biography — Editable Preview</h1>
        <div class="small">You can edit fields in the form or directly click the preview text to edit. Use the file input to change the picture.</div>
      </div>
    </header>

    <div class="layout">
      <!-- Form Column -->
      <aside>
        <form id="bioForm" class="card" onsubmit="return false;" aria-label="Edit biography form">
          <div class="field">
            <label for="name">Full name</label>
            <input id="name" type="text" placeholder="e.g. Tanuja Prasanna" value="">
          </div>

          <div class="field">
            <label for="birth">Birth date</label>
            <input id="birth" type="date">
          </div>

          <div class="field">
            <label for="address">Address</label>
            <textarea id="address" placeholder="Your address"></textarea>
          </div>

          <div class="row">
            <div style="flex:1" class="field">
              <label for="hobby">Hobby</label>
              <input id="hobby" type="text" placeholder="e.g. Painting, Hiking">
            </div>
            <div style="width:160px" class="field">
              <label for="religion">Religion</label>
              <select id="religion">
                <option value="">Prefer not to say</option>
                <option>Hinduism</option>
                <option>Christianity</option>
                <option>Islam</option>
                <option>Buddhism</option>
                <option>Sikhism</option>
                <option>Other</option>
              </select>
            </div>
          </div>

          <div class="field">
            <label for="linkedin">LinkedIn URL</label>
            <input id="linkedin" type="url" placeholder="https://www.linkedin.com/in/yourname">
          </div>

          <div class="field">
            <label for="youtube">YouTube URL</label>
            <input id="youtube" type="url" placeholder="https://www.youtube.com/channel/...">
          </div>

          <div class="field">
            <label for="instagram">Instagram URL</label>
            <input id="instagram" type="url" placeholder="https://www.instagram.com/yourname">
          </div>

          <div class="field">
            <label for="photo">Choose profile picture</label>
            <input id="photo" type="file" accept="image/*">
            <div class="small" style="margin-top:6px">Choose an image (jpg, png). It will show in the preview immediately.</div>
          </div>

          <div class="controls">
            <button type="button" id="applyBtn" class="btn">Apply</button>
            <button type="button" id="saveBtn" class="btn secondary">Save to browser</button>
            <button type="button" id="clearBtn" class="btn secondary">Clear</button>
          </div>

          <div class="small" style="margin-top:10px">Saved data is stored locally in your browser (localStorage). It will not be uploaded anywhere.</div>
        </form>
      </aside>

      <!-- Preview Column -->
      <section class="card" aria-label="Biography preview">
        <img id="previewImg" class="profile-pic" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='800' height='600'><rect width='100%' height='100%' fill='%23eef6ff'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='22' fill='%2388a' >No image selected</text></svg>" alt="Profile picture preview">

        <h2 id="displayName" class="editable" contenteditable="true" aria-label="Edit name">Your Name</h2>
        <div class="small editable" id="displayBirth" contenteditable="true" aria-label="Edit birth">Birth date: —</div>
        <div style="height:12px"></div>
        <p class="small editable" id="displayAddress" contenteditable="true" aria-label="Edit address">Address: —</p>

        <hr style="border:none; height:1px; background:#f1f3f7; margin:18px 0">

        <div>
          <div class="bio-item"><strong class="bio-title">Hobby</strong><div id="displayHobby" class="small editable" contenteditable="true">—</div></div>
          <div class="bio-item"><strong class="bio-title">Religion</strong><div id="displayReligion" class="small editable" contenteditable="true">—</div></div>
        </div>

        <div style="margin-top:12px" class="social">
          <div class="small">Social links</div>
          <div style="display:flex; gap:8px; margin-top:8px">
            <a id="lnkLinkedIn" href="#" target="_blank" rel="noopener noreferrer" title="LinkedIn">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M4.98 3.5C4.98 4.88071 3.88071 6 2.5 6C1.11929 6 0 4.88071 0 3.5C0 2.11929 1.11929 1 2.5 1C3.88071 1 4.98 2.11929 4.98 3.5ZM0 24V7h5v17H0ZM8 7h4.8v2.5h.1c.67-1.2 2.3-2.5 4.7-2.5 5 0 5.9 3.3 5.9 7.6V24h-5V16.2c0-1.9 0-4.3-2.6-4.3-2.6 0-3 2.1-3 4.2V24H8V7z" fill="currentColor"/></svg>
              <span style="font-size:0.9rem">LinkedIn</span>
            </a>
            <a id="lnkYouTube" href="#" target="_blank" rel="noopener noreferrer" title="YouTube">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M23.5 7.1s-.2-1.7-.8-2.4C21.6 3 20.6 3 20 2.9 16.8 2.6 12 2.6 12 2.6h0s-4.8 0-8 0C2.7 2.6 1.7 3 1.3 4.7c-.6 1.7-.7 2.4-.7 2.4S0 9 0 10.9v2.2c0 1.9.6 3.7.6 3.7s.1.7.7 2.4c.4 1.7 1.6 2.1 2.2 2.3 1.9.5 8.1.5 8.1.5s4.8 0 8 0c.6 0 1.6 0 2.4-.6.8-.6.8-1.7.8-2.4.1-1.9.1-3.8.1-3.8s0-1.7-.1-3.6c0 0 0-.7-.1-1.8z" fill="currentColor"/></svg>
              <span style="font-size:0.9rem">YouTube</span>
            </a>
            <a id="lnkInstagram" href="#" target="_blank" rel="noopener noreferrer" title="Instagram">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 6.5a4 4 0 1 0 0 8 4 4 0 0 0 0-8zm5-3a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" fill="currentColor"/></svg>
              <span style="font-size:0.9rem">Instagram</span>
            </a>
          </div>
        </div>

      </section>
    </div>

    <footer>Tip: double-click any preview text to edit it directly, then click outside to sync with the form.</footer>
  </div>

  <script>
    // DOM refs
    const nameEl = document.getElementById('name');
    const birthEl = document.getElementById('birth');
    const addressEl = document.getElementById('address');
    const hobbyEl = document.getElementById('hobby');
    const religionEl = document.getElementById('religion');
    const linkedinEl = document.getElementById('linkedin');
    const youtubeEl = document.getElementById('youtube');
    const instagramEl = document.getElementById('instagram');
    const photoEl = document.getElementById('photo');

    const previewImg = document.getElementById('previewImg');
    const displayName = document.getElementById('displayName');
    const displayBirth = document.getElementById('displayBirth');
    const displayAddress = document.getElementById('displayAddress');
    const displayHobby = document.getElementById('displayHobby');
    const displayReligion = document.getElementById('displayReligion');
    const lnkLinkedIn = document.getElementById('lnkLinkedIn');
    const lnkYouTube = document.getElementById('lnkYouTube');
    const lnkInstagram = document.getElementById('lnkInstagram');

    // Utility: normalize text for birth when editing inline
    function extractBirthText(text){
      // Accept either "Birth date: …" or a raw date
      const prefix = 'Birth date:';
      if(text.includes(prefix)) return text.replace(prefix, '').trim();
      return text.trim();
    }

    // Load saved data if present
    function loadFromStorage(){
      try{
        const raw = localStorage.getItem('my_bio_v2');
        if(!raw) return;
        const obj = JSON.parse(raw);
        nameEl.value = obj.name || '';
        birthEl.value = obj.birth || '';
        addressEl.value = obj.address || '';
        hobbyEl.value = obj.hobby || '';
        religionEl.value = obj.religion || '';
        linkedinEl.value = obj.linkedin || '';
        youtubeEl.value = obj.youtube || '';
        instagramEl.value = obj.instagram || '';
        if(obj.photo){ previewImg.src = obj.photo; }
        applyToPreview();
      }catch(e){ console.warn('Could not load saved bio', e); }
    }

    function applyToPreview(){
      displayName.textContent = nameEl.value || 'Your Name';
      displayBirth.textContent = birthEl.value ? ('Birth date: ' + (new Date(birthEl.value)).toLocaleDateString()) : 'Birth date: —';
      displayAddress.textContent = addressEl.value ? addressEl.value : 'Address: —';
      displayHobby.textContent = hobbyEl.value || '—';
      displayReligion.textContent = religionEl.value || '—';

      // Links
      const ln = linkedinEl.value.trim();
      if(ln){ lnkLinkedIn.href = ln; lnkLinkedIn.style.opacity = 1; } else { lnkLinkedIn.href = '#'; lnkLinkedIn.style.opacity = 0.5 }
      const yt = youtubeEl.value.trim();
      if(yt){ lnkYouTube.href = yt; lnkYouTube.style.opacity = 1; } else { lnkYouTube.href = '#'; lnkYouTube.style.opacity = 0.5 }
      const ig = instagramEl.value.trim();
      if(ig){ lnkInstagram.href = ig; lnkInstagram.style.opacity = 1; } else { lnkInstagram.href = '#'; lnkInstagram.style.opacity = 0.5 }
    }

    // Apply button
    document.getElementById('applyBtn').addEventListener('click', ()=>{
      applyToPreview();
      alert('Preview updated. You can also edit the preview text directly.');
    });

    // Save to localStorage
    document.getElementById('saveBtn').addEventListener('click', ()=>{
      const data = {
        name: nameEl.value,
        birth: birthEl.value,
        address: addressEl.value,
        hobby: hobbyEl.value,
        religion: religionEl.value,
        linkedin: linkedinEl.value,
        youtube: youtubeEl.value,
        instagram: instagramEl.value,
        photo: previewImg.src && previewImg.src.startsWith('data:') ? previewImg.src : null
      };
      try{
        localStorage.setItem('my_bio_v2', JSON.stringify(data));
        alert('Saved locally in your browser.');
      }catch(e){ alert('Could not save: ' + e.message) }
    });

    // Clear
    document.getElementById('clearBtn').addEventListener('click', ()=>{
      if(!confirm('Clear all fields and preview?')) return;
      nameEl.value = '';
      birthEl.value = '';
      addressEl.value = '';
      hobbyEl.value = '';
      religionEl.value = '';
      linkedinEl.value = '';
      youtubeEl.value = '';
      instagramEl.value = '';
      previewImg.src = "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='800' height='600'><rect width='100%' height='100%' fill='%23eef6ff'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='22' fill='%2388a' >No image selected</text></svg>";
      localStorage.removeItem('my_bio_v2');
      applyToPreview();
    });

    // Photo preview
    photoEl.addEventListener('change', (e)=>{
      const file = e.target.files && e.target.files[0];
      if(!file) return;
      if(!file.type.startsWith('image/')){ alert('Please select an image file'); return; }
      const reader = new FileReader();
      reader.onload = function(evt){ previewImg.src = evt.target.result; };
      reader.readAsDataURL(file);
    });

    // Live preview while typing (debounced small)
    let typingTimer;
    ['input','change'].forEach(evt => {
      [nameEl,birthEl,addressEl,hobbyEl,religionEl,linkedinEl,youtubeEl,instagramEl].forEach(el=> el.addEventListener(evt, ()=>{
        clearTimeout(typingTimer); typingTimer = setTimeout(applyToPreview, 300);
      }));
    });

    // Make inline editable preview sync back to form
    const editablePairs = [
      {preview: displayName, field: nameEl},
      {preview: displayAddress, field: addressEl},
      {preview: displayHobby, field: hobbyEl},
      {preview: displayReligion, field: religionEl},
      {preview: displayBirth, field: birthEl}
    ];

    editablePairs.forEach(pair => {
      pair.preview.addEventListener('blur', ()=>{
        if(pair.field === birthEl){
          // Try to parse a date string from edited text
          const txt = extractBirthText(pair.preview.textContent || '');
          const parsed = Date.parse(txt);
          if(!isNaN(parsed)){
            // Convert to yyyy-mm-dd for input[type=date]
            const d = new Date(parsed);
            const yyyy = d.getFullYear();
            const mm = String(d.getMonth()+1).padStart(2,'0');
            const dd = String(d.getDate()).padStart(2,'0');
            pair.field.value = yyyy + '-' + mm + '-' + dd;
          } else {
            // leave as empty if couldn't parse
            pair.field.value = '';
          }
        } else if(pair.field.tagName === 'SELECT'){
          // For religion, set closest match
          const txt = (pair.preview.textContent || '').trim();
          for(const opt of pair.field.options){ if(opt.value === txt || opt.text === txt){ pair.field.value = opt.value || opt.text; break; } }
        } else {
          pair.field.value = (pair.preview.textContent || '').trim();
        }
        applyToPreview();
      });

      // Keep caret friendly: when double-clicking to edit, select all
      pair.preview.addEventListener('dblclick', (e)=>{ e.stopPropagation(); pair.preview.focus(); document.execCommand('selectAll', false, null); });
    });

    // If form fields change, update preview immediately
    [nameEl,birthEl,addressEl,hobbyEl,religionEl].forEach(el => el.addEventListener('input', applyToPreview));

    // initialize
    loadFromStorage();
  </script>
</body>
</html>